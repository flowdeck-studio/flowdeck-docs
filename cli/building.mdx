---
title: "Building & Running"
description: "Build and run iOS/macOS apps from the command line"
---

FlowDeck CLI provides powerful build and run capabilities optimized for command-line workflows and CI/CD integration.

## Recommended Workflow

The recommended workflow is to use `init` to save project settings, then run commands without parameters:

```bash
# 1. Discover project structure
flowdeck context --json

# 2. Initialize with discovered settings
flowdeck init -w MyApp.xcworkspace -s MyApp -S "iPhone 16"

# 3. Run commands without parameters
flowdeck build
flowdeck run
flowdeck test
flowdeck clean
```

<Tip>
After running `flowdeck init`, all subsequent commands use the saved settings automatically. You only need to specify parameters when you want to override the defaults.
</Tip>

## Project Context

The `context` command gives you (or your AI agent) everything needed to understand your project at a glance. Available schemes, build configurations, simulators, and connected devices.

```bash
# Get app context
flowdeck context

# JSON output (recommended for AI agents)
flowdeck context --json
```

## Building Your App

### Basic Build

```bash
# After init, build using saved settings
flowdeck build

# Or specify parameters directly
flowdeck build -w MyApp.xcworkspace -s MyApp -S "iPhone 16"
```

### Build for macOS

Use `--device "My Mac"` for macOS targets:

```bash
flowdeck build -w MyApp.xcworkspace -s MyApp -D "My Mac"
```

### Build for Physical Device

Use `--device` with the device name or UDID:

```bash
# By device name (partial match, case-insensitive)
flowdeck build -w MyApp.xcworkspace -s MyApp -D "iPhone"
flowdeck build -w MyApp.xcworkspace -s MyApp -D "John's iPhone"

# By device UDID (exact match)
flowdeck build -w MyApp.xcworkspace -s MyApp -D "00008130-001245110C08001C"
```

<Tip>
  Use `flowdeck device list` to see available devices and their UDIDs.
</Tip>

### Build Configurations

Specify Debug or Release configuration:

```bash
# Debug build (default)
flowdeck build -C Debug

# Release build
flowdeck build -C Release
```

### Custom Xcodebuild Options

Pass arguments directly to xcodebuild:

```bash
# Code coverage
flowdeck build --xcodebuild-options='-enableCodeCoverage YES'

# Quiet mode
flowdeck build --xcodebuild-options='-quiet'

# Environment variables
flowdeck build --xcodebuild-env='CI=true'
```

<Info>
  For the complete list of build options, see the [Build Command Reference](/cli/commands/build).
</Info>

## Running Your App

### Build and Run on Simulator

```bash
# After init, run using saved settings
flowdeck run

# Or specify parameters directly
flowdeck run -w MyApp.xcworkspace -s MyApp -S "iPhone 16"
```

This command:

1. Builds the app
2. Opens Simulator.app (if iOS)
3. Boots the simulator (or uses already running)
4. Installs the app
5. Launches the app

### Build and Run on macOS

```bash
flowdeck run -w MyApp.xcworkspace -s MyApp -D "My Mac"
```

### Mac Catalyst

Run an iOS app as Mac Catalyst using `--device "My Mac Catalyst"`:

```bash
flowdeck run -w MyApp.xcworkspace -s MyApp -D "My Mac Catalyst"
```

This builds the app with `platform=macOS,variant=Mac Catalyst` and runs it natively on your Mac.

<Tip>
  Use `flowdeck device list` to see all available targets including "My Mac" and "My Mac Catalyst".
</Tip>

### Build and Run on Physical Device

```bash
flowdeck run -w MyApp.xcworkspace -s MyApp -D "John's iPhone"
```

<Info>
  For the complete list of run options including `--interactive` and `--wait-for-debugger`, see the [Run Command Reference](/cli/commands/build#flowdeck-run).
</Info>

### Run with Log Streaming

Stream OSLog output after launching:

```bash
flowdeck run -S "iPhone 16" --log
flowdeck run -S "iPhone 16" -l  # Short form
```

### App Launch Arguments

Pass arguments and environment variables to your app:

```bash
# Launch arguments
flowdeck run -S "iPhone 16" --launch-options='-AppleLanguages (en) -SkipOnboarding'

# Environment variables
flowdeck run -S "iPhone 16" --launch-env='DEBUG=1 API_ENV=staging'
```

## JSON Output for Automation

Use `--json` for machine-readable output, essential for CI/CD pipelines:

```bash
flowdeck build --json
flowdeck run --json
flowdeck test --json
```

<Info>
  For complete CI/CD setup including license configuration and pipeline examples, see [CI/CD Integration](/cli/ci-cd).
</Info>

This outputs NDJSON (newline-delimited JSON) events:

```json
{"type":"app_log","message":"Build Started"}
{"type":"app_log","message":"Resolving Packages"}
{"type":"app_log","message":"Building"}
{"type":"app_log","message":"Build Completed"}
```

## Custom Derived Data

Specify a custom derived data path to avoid conflicts with Xcode:

```bash
flowdeck build -d ~/FlowDeck/DerivedData
```

## Cleaning

Clean build artifacts before rebuilding:

```bash
# After init, clean using saved settings
flowdeck clean

# Clean scheme artifacts
flowdeck clean -w MyApp.xcworkspace -s MyApp

# Clean all derived data
flowdeck clean --derived-data

# Clean Xcode cache
flowdeck clean --xcode-cache

# Clean everything
flowdeck clean --all
```

## Config Files

Use the `--config` option to pass a set of pre-defined parameters from a JSON file. This is especially useful for CI/CD pipelines and complex build configurations.

To generate a config file, use the `W` (Write Config) option in FlowDeck interactive mode.

```bash
# Build with a config file
flowdeck build --config .flowdeck/ci-config.json

# Run with a config file
flowdeck run --config .flowdeck/ci-config.json
```

See [Configuration File](/cli/configuration-file) for the complete reference.

## Performance Optimization

FlowDeck CLI automatically:

- Detects CPU core count for parallel builds
- Uses optimized build settings
- Enables incremental compilation

## Troubleshooting

### "Workspace not found"

Ensure you're specifying the correct path:

```bash
# Use full path if needed
flowdeck build -w /path/to/MyApp.xcworkspace -s MyApp -S "iPhone 16"

# Or navigate to the project directory and use init
cd ~/Projects/MyApp
flowdeck init -w MyApp.xcworkspace -s MyApp -S "iPhone 16"
flowdeck build
```

### "Scheme not found"

Use `flowdeck context --json` to discover available schemes:

```bash
flowdeck context --json | jq '.schemes'
```

### "Simulator not found"

List available simulators first:

```bash
flowdeck simulator list -P iOS -A
```

### "Build failed"

Try cleaning and rebuilding:

```bash
flowdeck clean --all
flowdeck build
```

Check the error output for specific issues like missing dependencies or code signing problems.